<!doctype html>
<html>

<head>
	<meta charset="utf-8">
	<title>Sudoku XY-Wing</title>
	
	<link href="google-code-prettify/prettify.css" rel="stylesheet" type="text/css" >
	<script src="google-code-prettify/prettify.js" type="text/javascript"> </script>
	
	<script src="lib/jquery.js" type="text/javascript"></script>
	<script src="lib/jquery.cookie.js" type="text/javascript"></script>
	<script src="js/jquery.treeview.js" type="text/javascript"></script>
	<script src="js/treeView.js" type="text/javascript" ></script>
	
	<script src="js/naviHeader.js" type="text/javascript" > </script>
	<script src="js/naviAlgorithm.js" type="text/javascript" > </script>
	
	<link rel="stylesheet" href="css/jquery.treeview.css">
	<link rel="stylesheet" href="css/screen.css">

	<link href="styleStandardEng.css" rel="stylesheet">
</head>

<body id="page" onload="prettyPrint()">
	<header>
		<img src="images/imgTop/SuDoKuAlgorithm3.jpg" >
	</header>

    <script type="text/javascript"> writeNaviHeader(); </script>
	
<!-- ========================================================================== -->
<section id="menuList">
	<aside>
		<script type="text/javascript"> writeNaviAlgorithm(); </script>	
	</aside>
</section>

<!-- -------------------------------------------------------------------------- -->
<section id="main">
	<article>
		<h2>XY-Wing</h2>
		<p>XY-Wing is an analysis algorithm of Locked with a cell with two candidate numbers(bivalue cell).
		When the three cells of the blue frame and the green frame are bivalue and weak links link each other,
		the cell in the orange frame is not the number a.<br>
		
		</p>
		<p style="text-align:center">
			<img src="images/img42/img42a.png" alt="XY-Wing" width="481" height="217">
		</p>
		<p>The analysis algorithm is as follows.
			<ol style="font-size:medium">
				<li>Create a list of bivalue cells.</li>
				<li>Select the cell to be the axis(Pivot cell) from the bivalue cell list.</li>
				<li>Create a list of bivalue weak links to connect to axis cells</li>
				<li>Choose 2 links from bivalue weak links list(combination selection).<br>
				(2-link is different in the other-end cell, and the number pair(ax and ay) is also different)</li>
				<li>Find the influencing cell X at the other end of the 2 link.<br>
				(There is a common number(a) for the other end of 2 link and cell X)</li>
			</ol>
		</p>
	
		<br>
		<p>Here is an example of XY-Wing.</p>
		<img src="images/img42/img42b.png" alt="XY-Wing" width="240" height="240">
		<img src="images/img42/img42c.png" alt="XY-Wing" width="240" height="240">
		<img src="images/img42/img42d.png" alt="XY-Wing" width="240" height="240">
		<small>
		<p class="newLine">.1..7.69.4.6.9..1.5.9.2...87....9....9..3..8....8....41...6.8.9.8..4.7.5.67.8..4.<br>
				6..1....7..18.73...2.3...9..5.9.8641.........1482.6.3..7...2.1...64.18..8....3..4<br>
				..8..5..6.3.......6.2.4.5.7...384.59..65..2.39..7...4...4.5.8.....2.8...8.946....<br></p></small><br>

		<h2>XY-Wing C# program</h2>
	<pre class="prettyprint linenums lang-C"><small>public partial class CellLinkGen: AnalyzerBaseV2{
    public bool XYwing( ){
        if(BVCellLst==null)  BVCellLst = pBDL.FindAll(p=&gt;(p.FreeBC==2)); //BV:bivalue
        if(BVCellLst.Count&lt;3) return false;           
        CeLKMan.PrepareCellLink(2);    //weak Link

        bool XYwing=false;
        foreach( var P0 in BVCellLst ){
            List&lt;UCellLink&gt; BVLKLst =CeLKMan.IEGetRcNoBTypB(P0.rc,0x1FF,2).Where(R=&gt;R.BVFlag).ToList();
            //foreach( var P in BVLKLst ) Console.WriteLine(P);
            if(BVLKLst.Count&lt;2) continue;

            var cmb = new Combination(BVLKLst.Count,2);
            int nxt=1;
            while(cmb.Successor(nxt)){
                UCellLink LKA=BVLKLst[cmb.Cmb[0]], LKB=BVLKLst[cmb.Cmb[1]];
                UCell Q=LKA.UCe2, R=LKB.UCe2;
                if( Q.rc==R.rc || LKA.no==LKB.no ) continue;

                Bit81 Q81 = ConnectedCells[LKA.rc2]&ConnectedCells[LKB.rc2];
                if(Q81.Count&lt;=0) continue;

                int noB = Q.FreeB.DifSet(1&lt;&lt;LKA.no) & R.FreeB.DifSet(1&lt;&lt;LKB.no);
                if(noB&lt;0) continue;
                int no=noB.BitToNum();

                string msg2=&quot;&quot;;
                foreach( var A in Q81.IEGetUCeNoB(pBDL,noB) ){
                    if( A==P0 || A==Q || A==R ) continue;
                    A.CancelB=noB; XYwing=true;
                    if(SolInfoDsp) msg2+=&quot; &quot;+A.rc.ToRCString()+&quot;(#&quot;+(no+1)+&quot;)&quot;;
                }

                if( XYwing ){ //XYwing fond
		            .
		            . (Solution report code)
		            .
					return true;
                }
            }
        }
        return false;
    }
    private string _XYwingResSub( UCell P ){
        string st=P.rc.ToRCString()+&quot;(#&quot;+P.FreeB.ToBitString(9).Replace(&quot;.&quot;,&quot;&quot;)+&quot;)&quot;;
        return st;
    }
}</small></pre>

	</article>
	<br><br>
</section>
	<footer>
		<p id="copyright">Copyright &copy; 2014- GNPX. All rights reserved.</p>
	</footer>

</body>

</html>
